import{r as e,j as t,c as s,m as a,A as i,e as n}from"./app-C-VT2Vy2.js";import{u as l}from"./use-transform-NcrbHpYx.js";function r({album:n,index:r,total:o,scrollY:d}){const[m,u]=e.useState(!1),[x,h]=e.useState(null),[f,p]=e.useState(!1),w=e.useRef(null),y=n.release_date?new Date(n.release_date).getFullYear():"";e.useEffect(()=>{p(!0)},[]);const g=[400*(r-1),400*r,400*(r+1)],b=l(d,g,[0,-60,0]),v=l(d,g,[.8,1.1,.8]),j=l(d,g,[.5,1,.5]);return e.useEffect(()=>{window.lenis&&(m?(window.lenis.stop(),document.body.style.overflow="hidden"):(window.lenis.start(),document.body.style.overflow=""))},[m]),t.jsxs(t.Fragment,{children:[t.jsx(a.div,{ref:w,className:"relative cursor-pointer shrink-0",style:{y:b,scale:v,opacity:j,zIndex:o-r},onClick:function(e){e.stopPropagation(),w.current&&h(w.current.getBoundingClientRect()),u(!0)},children:t.jsx("div",{className:"w-45 h-45 md:w-65 md:h-65 bg-cover bg-center rounded-xl shadow-2xl hover:scale-105 transition-transform duration-500",style:{backgroundImage:`url(${n.cover_url})`}})}),f&&s.createPortal(t.jsx(i,{children:m&&x&&t.jsxs("div",{className:"fixed inset-0 z-99999 flex items-center justify-center",children:[t.jsx(a.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/70 backdrop-blur-md",onClick:()=>u(!1)}),t.jsx(c,{album:n,rackRect:x,year:y})]})}),document.body)]})}function c({album:e,rackRect:s,year:i}){const l=window.innerWidth/2-(s.left+s.width/2),r=window.innerHeight/2-(s.top+s.height/2);return t.jsxs(a.div,{className:"relative flex flex-col items-center p-4",initial:{scale:s.width/400,x:-l,y:-r},animate:{scale:1,x:0,y:0},exit:{scale:s.width/400,x:-l,y:-r,opacity:0},transition:{type:"spring",damping:30,stiffness:200},onClick:()=>n.visit(`/albums/${e.slug}`),children:[t.jsx("div",{className:"w-[85vw] h-[85vw] max-w-100 max-h-100 bg-cover bg-center rounded-lg shadow-2xl cursor-pointer",style:{backgroundImage:`url(${e.cover_url})`}}),t.jsxs("div",{className:"text-center mt-8 text-white",children:[t.jsx("p",{className:"text-xs tracking-[0.5em] text-stone-500 mb-2 uppercase",children:i}),t.jsx("h2",{className:"text-3xl md:text-5xl font-bold",style:{fontFamily:"Nickson"},children:e.title}),t.jsx("p",{className:"mt-4 text-xs text-stone-400 italic",children:"Click image to explore tracks"})]})]})}export{r as default};
