async function t(t,e){const o=$("#sounds");let n=0;let c=!0,i=!1;async function s(){if(c&&!i){i=!0;try{const s=await fetch(`${window.location.origin}/tab/sounds?offset=${n}&limit=5`,{headers:{"X-Requested-With":"XMLHttpRequest"}}),l=await s.json();o.append(l.html),n=l.nextOffset,c=l.hasMore,i=!1,function(){const o=function(t,e){return debounce(()=>{"function"==typeof t&&t(),"function"==typeof e&&e()},150)}(t,e);setTimeout(o,100),document.querySelectorAll("#albumsAccordion .accordion-item").forEach(t=>{const e=t.querySelector(".accordion-collapse"),n=t.querySelector(".accordion-header");e.addEventListener("shown.bs.collapse",()=>{t.querySelectorAll(".song-title").forEach(t=>{t.scrollHeight>t.clientHeight&&(t.setAttribute("title",t.textContent.trim()),new bootstrap.Tooltip(t))});const e=document.querySelector(".tab-content");if(n&&e){const t=e.scrollTop,o=n.getBoundingClientRect().top-e.getBoundingClientRect().top+t;e.scrollTo({top:o,behavior:"smooth"})}setTimeout(o,100)})}),document.querySelectorAll(".play-icon").forEach(t=>{t.addEventListener("click",function(){const t=this.dataset.trackId;document.getElementById(`embed-${t}`).classList.toggle("d-none")})})}()}catch(s){i=!1}}}s(),window.addEventListener("scroll",()=>{window.innerHeight+window.scrollY>=document.body.offsetHeight-100&&s()})}export{t as initSoundtrackAlbum};
