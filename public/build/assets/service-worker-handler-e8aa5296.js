document.addEventListener("DOMContentLoaded",()=>{function e(){if(document.getElementById("offline-toast"))return;const e=document.createElement("div");e.id="offline-toast",e.className="\n            toast align-items-center border-0 position-fixed top-0 start-50 translate-middle-x show\n            glassy-toast\n        ",e.setAttribute("role","alert"),e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),e.innerHTML='\n            <div class="d-flex justify-content-center">\n                <div class="toast-body text-center text-white fw-semibold">\n                    ⚠️ Anda sedang offline\n                </div>\n            </div>\n        ',document.body.appendChild(e);bootstrap.Toast.getOrCreateInstance(e,{autohide:!1}).show()}"serviceWorker"in navigator&&(window.addEventListener("load",()=>{const e=window.APP_VERSION||"1.0.0";navigator.serviceWorker.register(`/service-worker.js?v=${e}`).then(e=>{e.waiting&&e.waiting.postMessage({type:"SKIP_WAITING"}),e.addEventListener("updatefound",()=>{const t=e.installing;t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller&&window.location.reload()})})}).catch(e=>{})}),navigator.serviceWorker.addEventListener("message",t=>{t.data&&"OFFLINE"===t.data.type&&navigator.serviceWorker.controller&&(document.getElementById("offline-toast")||e())})),navigator.onLine||e(),window.addEventListener("offline",()=>{e()}),window.addEventListener("online",()=>{!function(){const e=document.getElementById("offline-toast");e&&(bootstrap.Toast.getOrCreateInstance(e).hide(),e.addEventListener("hidden.bs.toast",()=>e.remove()))}()})});
