function e(){const e=[{id:"discover",label:"Discover"},{id:"sounds",label:"Sounds"},{id:"shows",label:"Shows"},{id:"visuals",label:"Visuals"},{id:"moments",label:"Moments"},{id:"media",label:"Media"},{id:"merch",label:"Merch"},{id:"artifacts",label:"Artifacts"},{id:"contact",label:"Contact"}];let t=[];function o(o,a){o.on("input",function(){const n=$(this).val().trim().toLowerCase();if(o.val(n),a.empty(),0===n.length)return void a.hide();const l=e.filter(e=>e.label.toLowerCase().includes(n)),s=t.filter(e=>e.name.toLowerCase().includes(n)||e.slug.toLowerCase().includes(n));0!==l.length||0!==s.length?(l.forEach(e=>{a.append(`\n                    <a href="/${e.id}"\n                       data-tab="${e.id}"\n                       class="list-group-item list-group-item-action">\n                       ${e.label}\n                    </a>\n                `)}),s.forEach(e=>{a.append(`\n                    <a href="/moments/${e.slug}"\n                        class="list-group-item list-group-item-action">\n                        Moments (${e.name})\n                    </a>\n                `)}),a.show()):a.append('<div class="list-group-item disabled">No results found</div>').show()}),a.on("click","a[data-tab]",function(e){e.preventDefault();const t=$(this).data("tab");if(!t)return;const n=`/${t}`;history.replaceState(null,null,n);const l=$(`a[data-bs-toggle="pill"][href="${`#${t}`}"]`);l.length&&new bootstrap.Tab(l[0]).show(),o.val(""),a.hide(),window.location.reload()})}fetch("/api/moments/categories").then(e=>e.json()).then(e=>{t=e.map(e=>({...e,searchLabel:`Moments (${e.name})`}))}).catch(()=>{});const a=$(".input-search"),n=$(".search-results");a.length&&n.length&&o(a,n);const l=$(".input-search-mobile"),s=$(".search-results-mobile");l.length&&s.length&&o(l,s),$(document).on("click",function(e){$(e.target).closest(".search-container, .mobile-search-popup").length||(n.hide(),s.hide())}),$(".mobile-search").on("click",function(e){e.preventDefault(),$(".mobile-search-popup").fadeIn(200),$(".mobile-search-popup .input-search-mobile").focus()}),$(".mobile-search-close").on("click",function(){$(".mobile-search-popup").fadeOut(200),$(".mobile-search-popup .search-results-mobile").hide().empty(),$(".mobile-search-popup .input-search-mobile").val("")}),function(){const e=window.location.pathname.replace(/^\/+|\/+$/g,"").split("/").pop();if(!e)return;const t=$(`a[data-bs-toggle="pill"][href="${`#${e}`}"]`);t.length&&new bootstrap.Tab(t[0]).show()}()}export{e as initSearch};
