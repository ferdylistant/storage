import{O as n,P as t,d as r,r as e,M as o,u as s,f as c,h as u,Q as a}from"./app-C-VT2Vy2.js";function f(n){const s=t(()=>r(n)),{isStatic:c}=e.useContext(o);if(c){const[,t]=e.useState(n);e.useEffect(()=>s.on("change",t),[])}return s}function i(n,t){const r=f(t()),e=()=>r.set(t());return e(),s(()=>{const t=()=>c.preRender(e,!1,!0),r=n.map(n=>n.on("change",t));return()=>{r.forEach(n=>n()),u(e)}}),r}function y(r,e,o,s){if("function"==typeof r)return function(n){a.current=[],n();const t=i(a.current,n);return a.current=void 0,t}(r);if(void 0!==o&&!Array.isArray(o)&&"function"!=typeof e)return function(n,r,e,o){const s=t(()=>Object.keys(e)),c=t(()=>({}));for(const t of s)c[t]=y(n,r,e[t],o);return c}(r,e,o,s);const c="function"==typeof e?e:function(...t){const r=!Array.isArray(t[0]),e=r?0:-1,o=t[0+e],s=t[1+e],c=t[2+e],u=t[3+e],a=n(s,c,u);return r?a(o):a}(e,o,s);return Array.isArray(r)?p(r,c):p([r],([n])=>c(n))}function p(n,r){const e=t(()=>[]);return i(n,()=>{e.length=0;const t=n.length;for(let r=0;r<t;r++)e[r]=n[r].get();return r(e)})}export{f as a,y as u};
