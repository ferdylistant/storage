async function t(t,e){const o=$("#sounds");let n=0;let c=!0,l=!1;o.length>0&&o.empty();const i=document.querySelector(".tab-content");async function r(r){if(c&&!l){l=!0;try{const s=await fetch(`${window.location.origin}/tab/sounds?offset=${n}&limit=5`,{headers:{"X-Requested-With":"XMLHttpRequest"}}),a=await s.json();if(r){const t=document.createElement("div");t.innerHTML=a.html;const e=Array.from(t.querySelectorAll(".accordion-item")),o=$("#albumsAccordion .accordion-item").length;e.forEach((t,e)=>{const n=o+e,c=t.querySelector(".accordion-header");c.id=`heading${n}`;const l=c.querySelector(".accordion-button");l.setAttribute("data-bs-target",`#collapse${n}`),l.setAttribute("aria-controls",`collapse${n}`);const i=t.querySelector(".accordion-collapse");i.id=`collapse${n}`,i.setAttribute("aria-labelledby",`heading${n}`),r?($(t).hide(),$("#albumsAccordion").append(t),$(t).fadeIn(800)):$("#albumsAccordion").append(t)}),n+=e.length,c=a.hasMore,l=!1}else o.append(a.html),n=a.nextOffset,c=a.hasMore,l=!1;!function(){const o=function(t,e){return debounce(()=>{"function"==typeof t&&t(),"function"==typeof e&&e()},150)}(t,e);setTimeout(o,100),document.querySelectorAll("#albumsAccordion .accordion-item").forEach(t=>{const e=t.querySelector(".accordion-collapse"),n=t.querySelector(".accordion-header");e.addEventListener("shown.bs.collapse",()=>{if(t.querySelectorAll(".song-title").forEach(t=>{t.scrollHeight>t.clientHeight&&(t.setAttribute("title",t.textContent.trim()),new bootstrap.Tooltip(t))}),n&&i){const t=i.scrollTop,e=n.getBoundingClientRect().top-i.getBoundingClientRect().top+t;i.scrollTo({top:e,behavior:"smooth"})}setTimeout(o,100)}),e.addEventListener("hide.bs.collapse",()=>{if(n&&i){const t=i.scrollTop,e=n.getBoundingClientRect().top-i.getBoundingClientRect().top+t;i.scrollTo({top:e,behavior:"smooth"})}setTimeout(o,100)})}),document.querySelectorAll(".play-icon").forEach(t=>{t.addEventListener("click",function(){const t=this.dataset.trackId;document.getElementById(`embed-${t}`).classList.toggle("d-none")})})}()}catch(s){l=!1}}}i&&(r(!1),i.addEventListener("scroll",()=>{i.scrollTop+i.clientHeight>=i.scrollHeight&&r(!0)}))}export{t as initSoundtrackAlbum};
