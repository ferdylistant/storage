async function e(e,t){const n=$("#media");let o=0;let c=!0,i=!1;n.length>0&&n.empty();const a=document.querySelector(".tab-content");async function r(a){if(c&&!i){i=!0;try{const r=await fetch(`${window.location.origin}/tab/media?offset=${o}&limit=5`,{headers:{"X-Requested-With":"XMLHttpRequest"}}),s=await r.json();if(s){if(a){const e=document.createElement("div");e.innerHTML=s.html;const t=Array.from(e.children);t.forEach(e=>{$(e).hide(),$("#mediaWrapper").append(e),$(e).fadeIn(800)}),o+=t.length,c=s.hasMore,i=!1}else n.append(s.html),o=s.nextOffset,c=s.hasMore,i=!1;const r=function(e,t){return debounce(()=>{"function"==typeof e&&e(),"function"==typeof t&&t()},150)}(e,t);setTimeout(r,100)}}catch(r){i=!1}}}a&&(r(!1),a.addEventListener("scroll",()=>{a.scrollTop+a.clientHeight>=a.scrollHeight&&r(!0)}))}export{e as initMedia};
