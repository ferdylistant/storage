async function e(e,t){const n=$("#media");let o=0;let c=!0,i=!1;n.length>0&&n.empty();const a=document.querySelector(".tab-content");async function r(a=!1){if(c&&!i){i=!0;try{const r=await fetch(`${window.location.origin}/tab/media?offset=${o}&limit=5`,{headers:{"X-Requested-With":"XMLHttpRequest"}}),s=await r.json(),l=document.createElement("div");l.innerHTML=s.html;const d=Array.from(l.children);a?(d.forEach(e=>{$(e).hide(),$("#mediaWrapper").append(e),$(e).fadeIn(800)}),o+=d.length,c=s.hasMore,i=!1):(n.append(s.html),o=s.nextOffset,c=s.hasMore,i=!1);const f=function(e,t){return debounce(()=>{"function"==typeof e&&e(),"function"==typeof t&&t()},150)}(e,t);setTimeout(f,100)}catch(r){i=!1}}}a&&(r(),a.addEventListener("scroll",()=>{a.scrollTop+a.clientHeight>=a.scrollHeight&&r(!0)}))}export{e as initMedia};
