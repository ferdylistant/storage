import{g as e,r as t,j as s,m as r,A as n,L as a}from"./app-C-VT2Vy2.js";import{f as i}from"./index-DD87_Bwa.js";import{l}from"./lenis-DSjdrjNP.js";import{i as o}from"./interactionGate-D55eMNgH.js";import{L as c}from"./LinkAnimationHover-DQXy4law.js";import{u,a as m}from"./use-transform-NcrbHpYx.js";import{u as d}from"./use-animation-frame-6TP8DkN9.js";const x=r(a);function f(){const a=e().props.album,i=t.useRef(null),x=t.useRef({x:0,y:0}),[f,h]=t.useState(null),[b,g]=t.useState(1),[v,y]=t.useState({url:null,visible:!1}),j=u(l,[600,1600],[60,-40]);t.useEffect(()=>{const e=e=>{o.get()&&(x.current={x:e.clientX,y:e.clientY})};return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)},[]),t.useEffect(()=>{const e=()=>{if(!i.current)return;const e=i.current.offsetWidth;g(e<=375?.6:e<=768?.7:1)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const w=t.useRef(a.map((e,t)=>({...e,radius:180+t%2*70,angle:m(t/a.length*Math.PI*2),x:m(0),y:m(0),z:m(0),speed:.0012*(1+t%2*.25)})));return d(()=>{if(!i.current)return;const e=i.current.getBoundingClientRect();let t=null,s=1/0;const r=96*b/2+5;w.current.forEach(n=>{const a=(n.angle.get()+n.speed)%(2*Math.PI);n.angle.set(a);const i=n.radius*b,l=i*Math.cos(a),o=i*Math.sin(a);n.x.set(l),n.y.set(o),n.z.set(Math.sin(a)*i*.3);const c=e.left+e.width/2+l,u=e.top+e.height/2+o,m=x.current.x-c,d=x.current.y-u,f=Math.hypot(m,d);f<r&&f<s&&(s=f,t=n)}),t!==f&&(h(t),y(t?{url:t.cover_url,visible:!0}:e=>({...e,visible:!1})))}),s.jsxs(r.section,{ref:i,style:{y:j},className:"\n        relative z-30\n        w-full min-h-screen\n        flex items-center justify-center\n\n        perspective-distant\n        mb-20\n    ",children:[s.jsx(n,{children:v.url&&s.jsx(r.div,{className:"absolute inset-0 z-0 bg-cover bg-center filter-gpu min-h-dvh",style:{backgroundImage:`url(${v.url})`},initial:{clipPath:"circle(0% at 50% 50%)",filter:"brightness(0.2) blur(12px)"},animate:{clipPath:v.visible?"circle(150% at 50% 50%)":"circle(0% at 50% 50%)",filter:v.visible?"brightness(0.35) blur(0px)":"brightness(0.2) blur(12px)"},exit:{clipPath:"circle(0% at 50% 50%)",filter:"brightness(0.2) blur(12px)"},transition:{duration:.85,ease:[.22,1,.36,1]}},v.url)}),s.jsx("svg",{className:"absolute inset-0 w-full h-full z-10 pointer-events-none",children:Array.from({length:2}).map((e,t)=>s.jsx("circle",{cx:"50%",cy:"50%",r:(180+70*t)*b,stroke:"rgba(255,255,255,0.18)",strokeWidth:"1",fill:"none"},t))}),s.jsxs("div",{className:"absolute z-20 flex flex-col items-center text-center",children:[s.jsx("h2",{className:"tracking-[0.35em] text-sm",children:"BROWSE MUSIC"}),s.jsx(c,{href:"/music",text:"Explore",ariaLabel:"Explore music albums and singles"})]}),s.jsx("div",{className:"relative w-full h-full z-20",children:w.current.map((e,t)=>s.jsx(p,{item:e,isActive:f===e},t))})]})}function p({item:e,isActive:a}){const l=t.useRef(null),[o,c]=t.useState(!1),[u,m]=t.useState({x:0,y:0}),[d,f]=t.useState({rotateX:0,rotateY:0});return s.jsx(x,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 select-none",style:{x:e.x,y:e.y,z:e.z},href:`/albums/${e.slug}`,children:s.jsxs("div",{className:"relative w-10.5 sm:w-14 md:w-20 lg:w-24 aspect-square rounded-full cursor-pointer",onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),onMouseMove:e=>{const t=l.current.getBoundingClientRect(),s=e.clientX-t.left,r=e.clientY-t.top;m({x:s,y:r});const n=t.width/2,a=t.height/2;f({rotateY:(s-n)/n*15,rotateX:(a-r)/a*15})},children:[s.jsx(r.img,{ref:l,src:e.cover_url,alt:e.title,className:"rounded-full object-cover border border-white/40",style:{transform:`rotateX(${d.rotateX}deg) rotateY(${d.rotateY}deg)`,transition:"transform 0.08s ease-out",boxShadow:"rgba(255,255,255,0.25) 0 10px 30px, rgba(0,0,0,0.35) 0 20px 60px"}}),o&&s.jsx("div",{className:"absolute inset-0 rounded-full pointer-events-none",style:{background:`radial-gradient(circle at ${u.x}px ${u.y}px, rgba(255,255,255,0.35), transparent 60%)`,mixBlendMode:"screen"}}),s.jsx(n,{children:o&&a&&s.jsxs(r.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},style:{left:u.x,top:u.y},className:"\n                            flex items-center\n                                pointer-events-none\n                                absolute z-20\n                                -translate-x-1/2 -translate-y-[120%]\n                                text-xs tracking-wide text-black\n                                bg-white/90 backdrop-blur\n                                px-3 py-1 rounded-full\n                                shadow-[0_0_20px_rgba(255,105,180,0.6)]\n                                whitespace-nowrap gap-1\n                            ",children:[e.title,s.jsx(i,{})]})})]})})}export{f as default};
