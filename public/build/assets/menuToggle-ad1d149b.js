async function t(t){return new Promise((e,l)=>{if(document.querySelector(`script[src="${t}"]`))return void e();const n=document.createElement("script");n.src=t,n.async=!0,n.onload=()=>e(),n.onerror=()=>l(new Error(`Failed to load script: ${t}`)),document.head.appendChild(n)})}function e(){const t=$(".menu-icon"),e=$("#menuOverlay"),l=$("#menuIcon"),n=$("#mainNavbar");function a(t){e.hasClass("active"),e.toggleClass("active"),l.toggleClass("active"),n.toggleClass("hover-disabled");e.hasClass("active")?setTimeout(()=>{"function"==typeof t&&t(!0)},100):(history.replaceState(null,null,window.location.pathname+window.location.search),"function"==typeof t&&t(!1))}return t.on("click",()=>{a(t=>{if(t){const t=new URL(window.location);if(!t.searchParams.has("tab")){const l=e.find('a[data-bs-toggle="pill"]').first();if(l.length){$(".tab-pane").removeClass("show active"),$(".nav-link").removeClass("active").attr("aria-selected","false"),new bootstrap.Tab(l[0]).show();const e=l.attr("href");e.startsWith("#")&&(t.searchParams.set("tab",e.substring(1)),history.replaceState(null,null,t))}}}})}),$(".close-icon").on("click",function(){const t=new URL(window.location);t.searchParams.delete("tab"),history.replaceState(null,null,t.pathname+t.search+t.hash),e.removeClass("active"),l.removeClass("active"),n.removeClass("hover-disabled")}),{toggleOverlay:a}}function l(){const t=document.getElementById("albumsAccordion"),e=document.querySelector(".tab-content");if(!t||!e)return;const l=$(e);function n(){e.scrollHeight>e.clientHeight?l.getNiceScroll().length?l.getNiceScroll().resize():l.niceScroll({autohidemode:!0,cursorcolor:"#888",cursorwidth:"5px",zindex:9999,horizrailenabled:!1}):l.getNiceScroll().length&&(l.getNiceScroll().remove(),l.css("overflow",""))}let a;t.addEventListener("shown.bs.collapse",()=>{n()}),window.addEventListener("resize",()=>{clearTimeout(a),a=setTimeout(()=>{n()},200)}),n(),document.querySelectorAll(".play-icon").forEach(t=>{t.addEventListener("click",function(){const t=this.dataset.trackId,e=document.getElementById(`embed-${t}`);e.classList.contains("d-none")?e.classList.remove("d-none"):e.classList.add("d-none")})})}async function n(){window.lightGallery||await async function(){const e=document.createElement("link");e.rel="stylesheet",e.href="https://cdn.jsdelivr.net/npm/lightgallery@2.7.2/css/lightgallery-bundle.min.css",document.head.appendChild(e),await t("https://cdn.jsdelivr.net/npm/lightgallery@2.7.2/lightgallery.min.js"),await t("https://cdn.jsdelivr.net/npm/lightgallery@2.7.2/plugins/zoom/lg-zoom.min.js"),await t("https://cdn.jsdelivr.net/npm/lightgallery@2.7.2/plugins/thumbnail/lg-thumbnail.min.js")}();const e=$("#albums"),l=$(".gallery-caption"),n=$("#lightgallery");try{const t=await fetch(window.location.origin+"/api/galleries");if(!t.ok)throw new Error("Network response was not ok");const a=await t.json(),o=a.filter(t=>"album"===t.kind),i=a.filter(t=>"image"===t.kind);for(const e of o){const t=i.find(t=>t.albumID===e.albumID);e.thumb=(null==t?void 0:t.srct)||"https://via.placeholder.com/220x180?text=Album"}if(0===o.length)return void l.html('<div class="text-center p-4"><h3>Stay Tuned</h3><p>Gallery coming soon!</p></div>');l.html('<p class="mb-3 text-center text-md-start">Captured snapshots from gigs, rehearsals, and behind the fuzz.</p>'),e.empty();for(const l of o)e.append(`\n        <div class="col-md-4">\n          <div class="card album-card" data-album-id="${l.albumID}" style="cursor:pointer;">\n            <img src="${l.thumb}" class="card-img-top" alt="${l.title}">\n            <div class="card-body text-center">\n              <h5 class="card-title">${l.title}</h5>\n            </div>\n          </div>\n        </div>\n      `);e.on("click",".album-card",function(){const t=parseInt($(this).data("album-id")),e=i.filter(e=>e.albumID===t);if(0!==e.length){n.empty().removeClass("d-none");for(const t of e)n.append(`\n          <a href="${t.src}" data-lg-size="1406-1390" data-sub-html="<h4>${t.title}</h4>">\n            <img src="${t.srct}" alt="${t.title}" style="display:none;" />\n          </a>\n        `);lightGallery(n[0],{plugins:[lgZoom,lgThumbnail],speed:500,thumbnail:!0,zoom:!0})}})}catch(a){console.error("Failed to load gallery:",a),l.html('<div class="alert alert-danger text-center">Failed to load gallery. Please try again later.</div>')}}async function a(){window.jQuery&&window.jQuery.fn.nanogallery2||await t("https://cdn.jsdelivr.net/npm/nanogallery2@3.0.5/dist/jquery.nanogallery2.min.js");const e=$("#youtube_gallery"),l=$("#captionYoutube");e.data("nanogallery2")&&(e.nanogallery2("destroy"),e.empty());const n=[{src:"https://www.youtube.com/watch?v=RrduNLMk360&list=RDRrduNLMk360&start_radio=1",title:"Marsmolys - The Progeny of Holy Moly | Live Session"},{src:"https://www.youtube.com/watch?v=AvxFlL_8asI",title:"Marsmolys - Undestructible (Live at Artjog 2024)"},{src:"https://www.youtube.com/watch?v=UZPy_TrOp9Q&list=RDUZPy_TrOp9Q&start_radio=1",title:"Marsmolys - Ways To Go (Live at ArtJog 2024)"}];0!==n.length?(l.html('<p class="text-center text-md-start">Watch Marsmolys music videos and live performances.</p>'),e.nanogallery2({items:n,galleryDisplayMode:"fullContent",gallerySorting:"random",thumbnailHeight:180,thumbnailWidth:320,thumbnailGutterWidth:10,thumbnailGutterHeight:10,thumbnailAlignment:"fillWidth",thumbnailBorderHorizontal:0,thumbnailBorderVertical:0,thumbnailLabel:{display:!1,position:"overImageOnBottom",titleFontSize:"1em",align:"center",titleMultiLine:!0,displayDescription:!1},viewerToolbar:{display:!1},viewerTools:{topRight:"closeButton"},locationHash:!1}),e.on("galleryDisplayed.nanogallery2",function(){const t=$(".tab-content");t.getNiceScroll().length?t.getNiceScroll().resize():t.niceScroll({autohidemode:!0,cursorcolor:"#888",cursorwidth:"5px",zindex:9999,horizrailenabled:!1})})):l.html('\n      <div class="d-flex justify-content-center align-items-center flex-column p-5 text-center">\n        <h3 style="font-family: Nickson, \'sans-serif\'; letter-spacing: 2px;">Stay Tuned</h3>\n        <p>Marsmolys will be releasing music videos and live performances soon.</p>\n      </div>\n    ')}export{n as initGallery,e as initMenuToggle,l as initSoundtrackAlbum,a as initYouTubePlayers};
