async function t(t){return new Promise((e,n)=>{if(document.querySelector(`script[src="${t}"]`))return void e();const o=document.createElement("script");o.src=t,o.async=!0,o.onload=()=>e(),o.onerror=()=>n(new Error(`Failed to load script: ${t}`)),document.head.appendChild(o)})}function e(){const t=$(".menu-icon"),e=$("#menuOverlay"),n=$("#menuIcon"),o=$("#mainNavbar");function l(t){e.hasClass("active"),e.toggleClass("active"),n.toggleClass("active"),o.toggleClass("hover-disabled");e.hasClass("active")?setTimeout(()=>{"function"==typeof t&&t(!0)},100):(history.replaceState(null,null,window.location.pathname),"function"==typeof t&&t(!1))}return t.on("click",()=>{l(t=>{if(t){const t=new URL(window.location);if(0===t.pathname.split("/").filter(Boolean).length){const n=e.find('a[data-bs-toggle="pill"]').first();if(n.length){$(".tab-pane").removeClass("show active"),$(".nav-link").removeClass("active").attr("aria-selected","false"),new bootstrap.Tab(n[0]).show();const e=n.attr("href");e.startsWith("#")&&(t.pathname="/"+e.substring(1),history.replaceState(null,null,t))}}}})}),$(".close-icon").on("click",function(){const t=new URL(window.location);t.pathname="/",history.replaceState(null,null,t.pathname),e.removeClass("active"),n.removeClass("active"),o.removeClass("hover-disabled")}),{toggleOverlay:l}}async function n(){try{const t=await fetch(window.location.origin+"/tab/discover",{headers:{"X-Requested-With":"XMLHttpRequest"}}),e=await t.json();$("#discover").html(e.html)}catch(t){console.error("Error fetching discover:",t)}}async function o(){try{let t=function(){a.getNiceScroll().length?a.getNiceScroll().resize():a.niceScroll({autohidemode:!0,cursorcolor:"#888",cursorwidth:"5px",zindex:9999,horizrailenabled:!1})},e=function(){i.scrollHeight>i.clientHeight?t():a.getNiceScroll().length&&(a.getNiceScroll().remove(),a.css("overflow",""))};const n=await fetch(window.location.origin+"/tab/sounds",{headers:{"X-Requested-With":"XMLHttpRequest"}}),o=await n.json();$("#sounds").html(o.html);const l=document.getElementById("albumsAccordion"),i=document.querySelector(".tab-content");if(!l||!i)return;const a=$(i);let r;l.addEventListener("shown.bs.collapse",()=>{e()}),window.addEventListener("resize",()=>{clearTimeout(r),r=setTimeout(()=>{e()},200)}),e(),document.querySelectorAll(".play-icon").forEach(t=>{t.addEventListener("click",function(){const t=this.dataset.trackId,e=document.getElementById(`embed-${t}`);e.classList.contains("d-none")?e.classList.remove("d-none"):e.classList.add("d-none")})})}catch(t){console.error("Error fetching soundtrack albums:",t)}}async function l(){try{let t=function(){i.getNiceScroll().length?i.getNiceScroll().resize():i.niceScroll({autohidemode:!0,cursorcolor:"#888",cursorwidth:"5px",zindex:9999,horizrailenabled:!1})},e=function(){l.scrollHeight>l.clientHeight?t():i.getNiceScroll().length&&(i.getNiceScroll().remove(),i.css("overflow",""))};const n=await fetch(window.location.origin+"/tab/shows",{headers:{"X-Requested-With":"XMLHttpRequest"}}),o=await n.json();$("#shows").html(o.html);const l=document.querySelector(".tab-content");if(!l)return;const i=$(l);e()}catch(t){console.error("Error fetching shows:",t)}}async function i(){}async function a(){const e=document.getElementById("moments"),n=window.location.pathname.split("/").filter(Boolean),o=n.length>1&&"moments"===n[0]?n[1]:null;let l=[],i=null;async function a(){try{const t=await fetch("/tab/moments",{headers:{"X-Requested-With":"XMLHttpRequest"}});if(!t.ok)throw new Error("Failed to load albums");const n=await t.json();e.innerHTML=n.html,document.querySelectorAll(".album-item").forEach(t=>{t.addEventListener("click",async()=>{const e=t.getAttribute("data-album-slug");history.pushState(null,"",`/moments/${e}`),await s(e)})}),i=null,l=[]}catch(t){console.error(t),e.innerHTML='<div class="alert alert-danger text-center">Failed to load albums.</div>'}}function r(t,e,n={}){const o=document.getElementById(t);if(!o)return;const l=o.clientWidth,a=n.spacing??8,r=n.rowHeight??200;let s=[],c=0;const d=[];function h(){if(!s.length)return;const t=s.reduce((t,e)=>t+e.aspectRatio,0),e=(l-a*(s.length-1))/t,n=s.map((t,n)=>{const o=e*t.aspectRatio,l=e,r=n===s.length-1?0:a;return`\n            <a href="${t.src}" class="gallery-item glightbox" data-gallery="album-${i}" data-title="${t.title??"Untitled"}"\n               style="flex: 0 0 ${o}px; height: ${l}px; margin-right: ${r}px;">\n                <img src="${t.srct}" alt="${t.title??""}" style="width: 100%; height: 100%; object-fit: cover;" />\n            </a>`}).join("");d.push(`<div class="gallery-row" style="display: flex; margin-bottom: ${a}px;">${n}</div>`),s=[],c=0}for(const i of e){const t=r*i.aspectRatio;c+t+a*s.length>l&&h(),s.push(i),c+=t}h(),o.innerHTML=d.join("")}async function s(n){try{const o=await fetch(`/tab/moments/${n}`,{headers:{"X-Requested-With":"XMLHttpRequest"}});if(!o.ok)throw new Error("Failed to load album photos");const a=await o.json();e.innerHTML=a.html,i=n,await function(t){const e=t.querySelectorAll("img");return Promise.all(Array.from(e).map(t=>t.complete&&0!==t.naturalHeight?Promise.resolve():new Promise(e=>{t.onload=()=>e(),t.onerror=()=>e()})))}(e),l=Array.from(e.querySelectorAll("a.gallery-item")).map(t=>{const e=t.querySelector("img");return{src:t.href,srct:e.src,title:t.getAttribute("data-title"),aspectRatio:e.naturalWidth/e.naturalHeight}}),r("my_glightbox_gallery",l),await async function(){if(!window.GLightbox&&(await t("https://cdn.jsdelivr.net/npm/glightbox/dist/js/glightbox.min.js"),!document.querySelector('link[href*="glightbox.min.css"]'))){const t=document.createElement("link");t.rel="stylesheet",t.href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css",document.head.appendChild(t)}}(),GLightbox({selector:".glightbox"});const s=$(".tab-content");s.getNiceScroll().length?s.getNiceScroll().resize():s.niceScroll({autohidemode:!0,cursorcolor:"#888",cursorwidth:"5px",zindex:9999,horizrailenabled:!1})}catch(o){console.error(o),e.innerHTML='<div class="alert alert-danger text-center">Failed to load photos.</div>'}}e.addEventListener("click",async t=>{("backToAlbums"===t.target.id||t.target.closest("#backToAlbums"))&&(history.pushState(null,"","/moments"),await a())}),o?await s(o):await a(),window.addEventListener("popstate",async()=>{const t=window.location.pathname.split("/").filter(Boolean),e=t.length>1&&"moments"===t[0]?t[1]:null;e?await s(e):await a()}),window.addEventListener("resize",()=>{l.length&&i&&r("my_glightbox_gallery",l)})}async function r(){window.jQuery&&window.jQuery.fn.nanogallery2||await t("https://cdn.jsdelivr.net/npm/nanogallery2@3.0.5/dist/jquery.nanogallery2.min.js");const e=$("#youtube_gallery"),n=$("#captionYoutube");e.data("nanogallery2")&&(e.nanogallery2("destroy"),e.empty());const o=[{src:"https://www.youtube.com/watch?v=RrduNLMk360&list=RDRrduNLMk360&start_radio=1",title:"Marsmolys - The Progeny of Holy Moly | Live Session"},{src:"https://www.youtube.com/watch?v=AvxFlL_8asI",title:"Marsmolys - Undestructible (Live at Artjog 2024)"},{src:"https://www.youtube.com/watch?v=UZPy_TrOp9Q&list=RDUZPy_TrOp9Q&start_radio=1",title:"Marsmolys - Ways To Go (Live at ArtJog 2024)"}];0!==o.length?(n.html('<p class="text-center text-md-start">Watch Marsmolys music videos and live performances.</p>'),e.nanogallery2({items:o,galleryDisplayMode:"fullContent",gallerySorting:"random",thumbnailHeight:180,thumbnailWidth:320,thumbnailGutterWidth:10,thumbnailGutterHeight:10,thumbnailAlignment:"fillWidth",thumbnailBorderHorizontal:0,thumbnailBorderVertical:0,thumbnailLabel:{display:!1,position:"overImageOnBottom",titleFontSize:"1em",align:"center",titleMultiLine:!0,displayDescription:!1},viewerToolbar:{display:!1},viewerTools:{topRight:"closeButton"},locationHash:!1}),e.on("galleryDisplayed.nanogallery2",function(){const t=$(".tab-content");t.getNiceScroll().length?t.getNiceScroll().resize():t.niceScroll({autohidemode:!0,cursorcolor:"#888",cursorwidth:"5px",zindex:9999,horizrailenabled:!1})})):n.html('\n      <div class="d-flex justify-content-center align-items-center flex-column p-5 text-center">\n        <h3 style="font-family: Nickson, \'sans-serif\'; letter-spacing: 2px;">Stay Tuned</h3>\n        <p>Marsmolys will be releasing music videos and live performances soon.</p>\n      </div>\n    ')}async function s(){}async function c(){}export{c as initArtifacts,n as initDiscover,a as initGallery,e as initMenuToggle,s as initMerch,l as initShows,o as initSoundtrackAlbum,i as initVisuals,r as initYouTubePlayers};
