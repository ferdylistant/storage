async function t(t){return new Promise((e,n)=>{if(document.querySelector(`script[src="${t}"]`))return void e();const o=document.createElement("script");o.src=t,o.async=!0,o.onload=()=>e(),o.onerror=()=>n(new Error(`Failed to load script: ${t}`)),document.head.appendChild(o)})}function e(){const t=$(".menu-icon"),e=$("#menuOverlay"),n=$("#menuIcon"),o=$("#mainNavbar");function l(t){e.hasClass("active"),e.toggleClass("active"),n.toggleClass("active"),o.toggleClass("hover-disabled");e.hasClass("active")?setTimeout(()=>{"function"==typeof t&&t(!0)},100):(history.replaceState(null,null,window.location.pathname+window.location.search),"function"==typeof t&&t(!1))}return t.on("click",()=>{l(t=>{if(t){const t=new URL(window.location);if(!t.searchParams.has("tab")){const n=e.find('a[data-bs-toggle="pill"]').first();if(n.length){$(".tab-pane").removeClass("show active"),$(".nav-link").removeClass("active").attr("aria-selected","false"),new bootstrap.Tab(n[0]).show();const e=n.attr("href");e.startsWith("#")&&(t.searchParams.set("tab",e.substring(1)),history.replaceState(null,null,t))}}}})}),$(".close-icon").on("click",function(){const t=new URL(window.location);t.searchParams.delete("tab"),history.replaceState(null,null,t.pathname+t.search+t.hash),e.removeClass("active"),n.removeClass("active"),o.removeClass("hover-disabled")}),{toggleOverlay:l}}function n(){const t=document.getElementById("albumsAccordion"),e=document.querySelector(".tab-content");if(!t||!e)return;const n=$(e);function o(){e.scrollHeight>e.clientHeight?n.getNiceScroll().length?n.getNiceScroll().resize():n.niceScroll({autohidemode:!0,cursorcolor:"#888",cursorwidth:"5px",zindex:9999,horizrailenabled:!1}):n.getNiceScroll().length&&(n.getNiceScroll().remove(),n.css("overflow",""))}let l;t.addEventListener("shown.bs.collapse",()=>{o()}),window.addEventListener("resize",()=>{clearTimeout(l),l=setTimeout(()=>{o()},200)}),o(),document.querySelectorAll(".play-icon").forEach(t=>{t.addEventListener("click",function(){const t=this.dataset.trackId,e=document.getElementById(`embed-${t}`);e.classList.contains("d-none")?e.classList.remove("d-none"):e.classList.add("d-none")})})}async function o(){await async function(){if(!window.GLightbox){await t("https://cdn.jsdelivr.net/npm/glightbox/dist/js/glightbox.min.js");const e=document.createElement("link");e.rel="stylesheet",e.href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css",document.head.appendChild(e)}}();const e=document.getElementById("my_glightbox_gallery"),n=document.querySelector(".gallery-caption");if(e)try{let t=function(){e.innerHTML=a.map(t=>{const e=r.find(e=>e.albumID===t.albumID),n=(null==e?void 0:e.src)||"https://via.placeholder.com/220x180?text=Album";return`\n          <div class="album" style="display:inline-block; margin:10px; cursor:pointer; text-align:center;" data-album-id="${t.albumID}">\n            <img src="${n}" alt="${t.title}" style="width:220px; height:180px; object-fit:cover; border-radius:4px;"/>\n            <div style="margin-top:8px;">${t.title}</div>\n          </div>\n        `}).join(""),e.querySelectorAll(".album").forEach(t=>{t.addEventListener("click",()=>{const e=t.getAttribute("data-album-id");o(e)})})},o=function(n){const o=r.filter(t=>t.albumID===n);0!==o.length?(e.innerHTML=`\n        <button id="backToAlbums" style="margin-bottom:15px;">&larr; Back to Albums</button>\n        <div class="photo-list">\n          ${o.map(t=>`\n            <a href="${t.src}" class="glightbox" data-gallery="album${n}" data-title="${t.title||""}">\n              <img src="${t.src}" alt="${t.title||""}" style="width:180px; height:120px; object-fit:cover; margin:5px; border-radius:4px;" />\n            </a>\n          `).join("")}\n        </div>\n      `,document.getElementById("backToAlbums").addEventListener("click",()=>{t()}),window.glightboxInstance&&window.glightboxInstance.destroy(),window.glightboxInstance=GLightbox({selector:".glightbox",loop:!0,zoomable:!0,autoplayVideos:!1})):e.innerHTML='<p class="text-center p-5">No photos in this album.</p>'};const l=await fetch(window.location.origin+"/api/galleries");if(!l.ok)throw new Error("Network response was not ok");const i=await l.json(),a=i.filter(t=>"album"===t.kind&&t.albumID&&t.title),r=i.filter(t=>"image"===t.kind&&t.src&&t.albumID);if(0===a.length)return void(n.innerHTML='\n        <div class="text-center p-5">\n          <h3>Stay Tuned</h3>\n          <p>Captured fuzzed-out moments will appear here soon.</p>\n        </div>');n.innerHTML='\n      <p class="text-center mb-3">\n        Captured snapshots from gigs, rehearsals, and behind the fuzz.\n      </p>',t()}catch(o){console.error("Failed to load gallery:",o),n.innerHTML='<div class="alert alert-danger text-center">Failed to load gallery. Please try again later.</div>'}}async function l(){window.jQuery&&window.jQuery.fn.nanogallery2||await t("https://cdn.jsdelivr.net/npm/nanogallery2@3.0.5/dist/jquery.nanogallery2.min.js");const e=$("#youtube_gallery"),n=$("#captionYoutube");e.data("nanogallery2")&&(e.nanogallery2("destroy"),e.empty());const o=[{src:"https://www.youtube.com/watch?v=RrduNLMk360&list=RDRrduNLMk360&start_radio=1",title:"Marsmolys - The Progeny of Holy Moly | Live Session"},{src:"https://www.youtube.com/watch?v=AvxFlL_8asI",title:"Marsmolys - Undestructible (Live at Artjog 2024)"},{src:"https://www.youtube.com/watch?v=UZPy_TrOp9Q&list=RDUZPy_TrOp9Q&start_radio=1",title:"Marsmolys - Ways To Go (Live at ArtJog 2024)"}];0!==o.length?(n.html('<p class="text-center text-md-start">Watch Marsmolys music videos and live performances.</p>'),e.nanogallery2({items:o,galleryDisplayMode:"fullContent",gallerySorting:"random",thumbnailHeight:180,thumbnailWidth:320,thumbnailGutterWidth:10,thumbnailGutterHeight:10,thumbnailAlignment:"fillWidth",thumbnailBorderHorizontal:0,thumbnailBorderVertical:0,thumbnailLabel:{display:!1,position:"overImageOnBottom",titleFontSize:"1em",align:"center",titleMultiLine:!0,displayDescription:!1},viewerToolbar:{display:!1},viewerTools:{topRight:"closeButton"},locationHash:!1}),e.on("galleryDisplayed.nanogallery2",function(){const t=$(".tab-content");t.getNiceScroll().length?t.getNiceScroll().resize():t.niceScroll({autohidemode:!0,cursorcolor:"#888",cursorwidth:"5px",zindex:9999,horizrailenabled:!1})})):n.html('\n      <div class="d-flex justify-content-center align-items-center flex-column p-5 text-center">\n        <h3 style="font-family: Nickson, \'sans-serif\'; letter-spacing: 2px;">Stay Tuned</h3>\n        <p>Marsmolys will be releasing music videos and live performances soon.</p>\n      </div>\n    ')}export{o as initGallery,e as initMenuToggle,n as initSoundtrackAlbum,l as initYouTubePlayers};
