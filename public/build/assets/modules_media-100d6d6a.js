async function t(t,e){const n=$("#media");let o=0;let c=!0,i=!1;const a=document.querySelector(".tab-content");async function r(a=!1){if(c&&!i){i=!0;try{const r=await fetch(`${window.location.origin}/tab/media?offset=${o}&limit=5`,{headers:{"X-Requested-With":"XMLHttpRequest"}}),s=await r.json(),d=document.createElement("div");d.innerHTML=s.html;const f=Array.from(d.children);a?f.forEach(t=>{$(t).hide(),$("#mediaWrapper").append(t),$(t).fadeIn(800)}):n.append(s.html),o=s.nextOffset,c=s.hasMore,i=!1;const l=function(t,e){return debounce(()=>{"function"==typeof t&&t(),"function"==typeof e&&e()},150)}(t,e);setTimeout(l,100)}catch(r){i=!1}}}a&&(r(),a.addEventListener("scroll",()=>{a.scrollTop+a.clientHeight>=a.scrollHeight&&r(!0)}))}export{t as initMedia};
